<!--pages/equipment/details/index.wxml-->
<wxs module="tool">
  module.exports = {
    getStatus: function (status) {

      var enumList = {
        "0": "可使用",
        "1": "使用中",
        "2": "维修中",
        "3": "已报废",
      }

      return enumList[status.toString()];
    }
  }
</wxs>
<view class="main">
  <view class="main-img">
    <image src="{{detail.imgUrl}}" mode="" />
  </view>
  <view class="main-container">
    <view class="main-container-card">
      <view>
        <text class="main-container-title">{{detail.name}}</text>
      </view>
      <view>
        <text class="main-container-subtitle">{{detail.description}}</text>
      </view>
      <view class="main-container-title-status">
        {{tool.getStatus(detail.status)}}
      </view>
    </view>
    <view class="main-container-card">
      <view class="user">
        <text class="user-title">当前所属人</text><text class="user-name">{{detail.status==0?"无":"默认"}}</text>
      </view>
    </view>
    <view class="main-container-card">
      <view class="attr" wx:for="{{detail.attr}}" wx:for-index="key" wx:for-item="value">
        <view>
          <text class="attr-title">{{key}}</text>
        </view>
        <view>
          <text class="attr-des">{{value}}</text>
        </view>
        <view class="attr-line" />
      </view>

    </view>
    <view class="main-container-card records-main">
      <view class="records-title">
        <text>使用记录</text>
        <text>开始时间</text>
        <text>结束时间</text>
      </view>

      <view class="attr">
        <view class="record-item">
          <text class="attr-title">章三</text>
        </view>
        <view class="record-item">
          <text class="attr-des">2023-01-02</text>
        </view>
        <view class="record-item1">
          <text class="attr-des">2023-05-03</text>
        </view>
        <view class="attr-line" />
      </view>
      <view class="attr">
        <view class="record-item">
          <text class="attr-title">章三</text>
        </view>
        <view class="record-item">
          <text class="attr-des">2023-01-02</text>
        </view>
        <view class="record-item1">
          <text class="attr-des">2023-05-03</text>
        </view>
        <view class="attr-line" />
      </view>


    </view>
  </view>
  <view class="main-action">

    <view wx:if="{{role=='student'}}">
      <t-button theme="primary" size="small" bindtap="applyUse">申请使用</t-button>
      <t-button theme="primary" size="small" bindtap="applyMaintenance">申请维修</t-button>
      <t-button theme="primary" size="small" bindtap="applyUnserviceable">申请报废</t-button>
    </view>
    <view wx:if="{{role=='admin'}}">
      <text class="applyUser">
        <text>申请人: </text>
        <text>张三</text>
      </text>
      <text class="applyStatus">
        <text>申请: </text>
        <text>维修</text>
      </text>
      <t-button theme="primary" size="small" bindtap="passApply">通过</t-button>
      <t-button theme="danger" size="small" bindtap="rejectApply">驳回</t-button>

    </view>
  </view>
</view>